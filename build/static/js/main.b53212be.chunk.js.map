{"version":3,"sources":["Components/PersonForm.js","services/persons.js","Components/Persons.js","Components/Filter.js","Components/Notification.js","App.js","index.js"],"names":["PersonForm","handleSubmit","newName","handleName","newNum","handleNum","onSubmit","value","onChange","type","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Persons","filterPersons","persons","setPersons","setFilterPersons","handleDelete","e","window","confirm","target","name","personService","res","console","log","filter","person","Number","map","number","onClick","Filter","handleFilter","Notification","message","className","includes","App","useState","setNewName","setNewNum","errorMessage","setErrorMessage","useEffect","regex","RegExp","newFilterPersons","test","preventDefault","exist","setTimeout","catch","err","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b53212be.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  handleSubmit,\r\n  newName,\r\n  handleName,\r\n  newNum,\r\n  handleNum,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleName} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNum} onChange={handleNum} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, remove, update };\r\n","import React from 'react';\r\nimport personService from '../services/persons';\r\n\r\nconst Persons = ({ filterPersons, persons, setPersons, setFilterPersons }) => {\r\n  const handleDelete = (e) => {\r\n    if (window.confirm(`Delete ${e.target.name}?`)) {\r\n      personService.remove(e.target.id).then((res) => {\r\n        console.log(res);\r\n        setPersons(\r\n          persons.filter((person) => person.id !== Number(e.target.id))\r\n        );\r\n        setFilterPersons(\r\n          filterPersons.filter((person) => person.id !== Number(e.target.id))\r\n        );\r\n      });\r\n    }\r\n    // console.log('e :>> ', e);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {filterPersons.map((person) => (\r\n        <div key={person.id}>\r\n          <label>\r\n            {person.name} {person.number}\r\n          </label>\r\n          <button id={person.id} name={person.name} onClick={handleDelete}>\r\n            delete\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ handleFilter }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input onChange={handleFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        message.includes('has already been removed from server')\r\n          ? 'error'\r\n          : 'success'\r\n      }\r\n    >\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from 'react';\nimport PersonForm from './Components/PersonForm';\nimport Persons from './Components/Persons';\nimport Filter from './Components/Filter';\nimport Notification from './Components/Notification';\nimport personService from './services/persons';\nimport './index.css';\n// import axios from 'axios';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filterPersons, setFilterPersons] = useState(persons);\n  const [newName, setNewName] = useState('');\n  const [newNum, setNewNum] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let exist = false;\n    let id;\n    for (const person of persons) {\n      if (person.name === newName) {\n        exist = true;\n        id = person.id;\n      }\n    }\n    if (exist) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(id, {\n            name: newName,\n            number: newNum,\n          })\n          .then((res) => {\n            console.log('res :>> ', res);\n            setPersons(\n              persons.map((person) => (person.id !== id ? person : res))\n            );\n            setFilterPersons(\n              filterPersons.map((person) => (person.id !== id ? person : res))\n            );\n            setErrorMessage(`Updated ${res.name}`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          })\n          .catch((err) => {\n            setErrorMessage(\n              `Information of ${newName} has already been removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            setPersons(persons.filter((person) => person.id !== id));\n            setFilterPersons(\n              filterPersons.filter((person) => person.id !== id)\n            );\n          });\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNum,\n      };\n      personService.create(personObject).then((res) => {\n        console.log(res);\n        setPersons(persons.concat(res));\n        setFilterPersons(persons.concat(res));\n        setNewName('');\n        setNewNum('');\n        setErrorMessage(`Added ${res.name}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n    }\n  };\n\n  const handleName = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNum = (e) => {\n    setNewNum(e.target.value);\n  };\n\n  const handleFilter = (e) => {\n    if (e.target.value === '') {\n      setFilterPersons(persons);\n    } else {\n      const regex = new RegExp(`^${e.target.value}`, 'i');\n      const newFilterPersons = filterPersons.filter((person) =>\n        regex.test(person.name)\n      );\n      setFilterPersons(newFilterPersons);\n    }\n  };\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPersons(res);\n      setFilterPersons(res);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleName={handleName}\n        newNum={newNum}\n        handleNum={handleNum}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        filterPersons={filterPersons}\n        persons={persons}\n        setPersons={setPersons}\n        setFilterPersons={setFilterPersons}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}